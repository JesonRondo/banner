var Banner=(function(){var g;var h=4;var i=4;var j=53;var k=false;var l=0;var m=function(){var b=$('#banner_main a');var c=$('#blist a');g=b.length;if(g>5){k=true}b.each(function(a){$(this).attr('data-index',a);if(a!==0){$(this).hide();$(this).css('z-index',1)}else{$(this).css('z-index',2).addClass('cur')}});c.each(function(a){$(this).attr('data-index',a);if(a===0){$(this).addClass('cur')}});if(k){$('#banner_bnav').on('mouseenter',function(){$(this).find('.banner_bnav_arr').show()}).on('mouseleave',function(){$(this).find('.banner_bnav_arr').hide()});$('#banner_bnav').on('click','.banner_bnav_arrt',o);$('#banner_bnav').on('click','.banner_bnav_arrb',p)}};var n=function(){$('#blist a').on('click',function(){if($(this).hasClass('cur')){return}var a=$('.banner_bnav_arr');a.addClass('disable');var b=parseInt($(this).attr('data-index'),10);$newBan=$('#banner_main a[data-index='+b+']');$oldBan=$('#banner_main .cur:eq(0)');r($newBan.find('img'));$newBan.css('z-index',3).fadeIn(200,function(){$oldBan.removeClass('cur').css('z-index',1).hide();$(this).addClass('cur').css('z-index',2);a.removeClass('disable')});if(b>h){var c=b-h;var d=$('#blist');var e=parseInt(d.css('top'),10)-c*j;d.animate({'top':e},200);h+=c;l+=c}else if(b<(h-i)){var c=(h-i)-b;var d=$('#blist');var e=parseInt(d.css('top'),10)+c*j;d.animate({'top':e},200);h-=c;l-=c}var f=(b-l)*j;$('.banner_bnav_curnav:eq(0)').animate({'top':f},200);$('#blist a').removeClass('cur');$(this).addClass('cur')})};var o=function(){if($('.banner_bnav_arr:eq(0)').hasClass('disable')){return}$prev=$('#blist .cur').parent().prev();if($prev.length===0){$('#blist a:last').click()}else{$prev.find('a:eq(0)').click()}};var p=function(){if($('.banner_bnav_arr:eq(0)').hasClass('disable')){return}$next=$('#blist a.cur').parent().next();if($next.length===0){$('#blist a:first').click()}else{$next.find('a:eq(0)').click()}};var q=function(){var a=0;$('#banner').on('mouseenter',function(){clearInterval(a)}).on('mouseleave',function(){clearInterval(a);a=setInterval(p,5000)}).mouseleave()};var r=function(a){if(a.attr('data-img')!==''){a.attr('src',a.attr('data-img'));a.attr('data-img','')}};return{init:function(){m()},start:function(){n();setTimeout(q,3000)}}}());